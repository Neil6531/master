(this.webpackJsonpexactt=this.webpackJsonpexactt||[]).push([[0],{133:function(e,a,t){e.exports=t.p+"static/media/exactt.04558f3a.png"},369:function(e,a,t){e.exports=t(805)},804:function(e,a,t){},805:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),s=t(4),l=t.n(s),c=(t(374),t(40)),o=t(41),i=t(43),u=t(42),m=t(44),p=t(16),d=t.n(p),h=t(806),f=t(807),y=t(808),E=t(810),g=t(811),b=t(63),w=t(133),v=t.n(w),U=t(99),x=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={confirmDirty:!1,autoCompleteResult:[]},t.UNSAFE_componentWillMount=function(){var e;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(U.User.logOut());case 2:return console.log("Set Up Page"),a.next=5,d.a.awrap(U.Cloud.run("checkCompany",{}));case 5:e=a.sent,console.log(e.length),e.length&&t.props.history.push("/auth");case 8:case"end":return a.stop()}}))},t.UNSAFE_componentWillReceiveProps=function(){console.log("Some Props")},t.handleSubmit=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:t.props.form.validateFieldsAndScroll((function(e,a){var n,r;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=14;break}return console.log("Received values of form: ",a),n={address:a.address,city:a.city,state:a.state,pincode:a.pincode},s.next=5,d.a.awrap(U.Cloud.run("setupCompany",{companyName:a.company,address:n,phone:a.phone,name:a.name,email:a.email,licNo:a.licno,gstNo:a.gst,password:a.password}));case 5:return s.next=7,d.a.awrap(U.User.logIn(a.email,a.password));case 7:return s.next=9,d.a.awrap(U.User.logOut());case 9:return s.next=11,d.a.awrap(U.Cloud.run("checkCompany",{}));case 11:r=s.sent,console.log(r.length),r.length&&t.props.history.push("/auth");case 14:case"end":return s.stop()}}))}));case 1:case"end":return e.stop()}}))},t.handleConfirmBlur=function(e){var a=e.target.value;t.setState({confirmDirty:t.state.confirmDirty||!!a})},t.compareToFirstPassword=function(e,a,n){var r=t.props.form;a&&a!==r.getFieldValue("password")?n("Two passwords that you enter is inconsistent!"):n()},t.validateToNextPassword=function(e,a,n){var r=t.props.form;a&&t.state.confirmDirty&&r.validateFields(["confirm"],{force:!0}),n()},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(h.a,{className:"height100"},r.a.createElement(h.a,{className:"header"},r.a.createElement(f.a,{span:8},r.a.createElement("img",{className:"headerLogo",src:v.a,alt:"exacttLogo"})),r.a.createElement(f.a,{span:8,type:"flex",justify:"space-around",align:"middle"}),r.a.createElement(f.a,{span:8,type:"flex",justify:"end",align:"stretch"},r.a.createElement("div",{className:"actionButton"},r.a.createElement("span",{onClick:this.handleLogout,className:"items"})))),r.a.createElement(h.a,{className:"container"},r.a.createElement(h.a,{type:"flex",justify:"space-around",align:"middle"},r.a.createElement(f.a,{span:24,align:"middle"}," ",r.a.createElement(y.a,{orientation:"center"},"Setup your company")),r.a.createElement(f.a,{span:12},r.a.createElement(E.a,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:15}}},r.a.createElement(E.a.Item,{label:"Company name"},e("company",{rules:[{required:!0,message:"Please input your company name!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Your Name"},e("name",{rules:[{required:!0,message:"Please input your company name!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Address"},e("address",{rules:[{required:!0,message:"Please input your compnay address!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"City"},e("city",{rules:[{required:!0,message:"Please input your city!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"State"},e("state",{rules:[{required:!0,message:"Please input your state!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Pin Code"},e("pincode",{rules:[{required:!0,message:"Please input your pin code!"}]})(r.a.createElement(g.a,{type:"number"}))),r.a.createElement(E.a.Item,{label:"Phone"},e("phone",{rules:[{required:!0,message:"Please input your phone!"}]})(r.a.createElement(g.a,{type:"number"}))),r.a.createElement(E.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your E-mail!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Lic. Number"},e("licno",{rules:[{required:!0,message:"Please input your LIC Number!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"GST Number"},e("gst",{rules:[{required:!0,message:"Please input your GST Number!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Password",hasFeedback:!0},e("password",{rules:[{required:!0,message:"Please input your Password!"},{validator:this.validateToNextPassword}]})(r.a.createElement(g.a.Password,null))),r.a.createElement(E.a.Item,{label:"Confirm Password",hasFeedback:!0},e("confirm",{rules:[{required:!0,message:"Please confirm your password!"},{validator:this.compareToFirstPassword}]})(r.a.createElement(g.a.Password,{onBlur:this.handleConfirmBlur}))),r.a.createElement(E.a.Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:15,offset:6}}},r.a.createElement(b.a,{type:"primary",htmlType:"submit",block:!0,onClick:this.handleSubmit},"Register")))))))}}]),a}(n.Component),O=E.a.create({name:"setup"})(x),C=t(6),j=t(99),k=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).UNSAFE_componentWillMount=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(j.User.current());case 2:e.sent&&t.props.history.push("/dashboard");case 4:case"end":return e.stop()}}))},t.handelSubmit=function(){t.props.form.validateFields((function(e,a){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=4;break}return console.log("Received values of form: ",a),n.next=4,d.a.awrap(j.User.logIn(a.username,a.password).then((function(e){console.log(e),t.props.history.push("/dashboard")})).catch((function(e){console.log(e)})));case 4:case"end":return n.stop()}}))}))},console.log(e),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(h.a,{type:"flex",justify:"space-around",align:"middle",className:"height100"},r.a.createElement(f.a,{span:6,type:"flex",justify:"space-around",align:"middle"},r.a.createElement("img",{className:"authLogo",src:v.a,alt:"Logo of exactt"}),r.a.createElement(E.a,{id:"components-form-normal-login",className:"login-form"},r.a.createElement(E.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(g.a,{prefix:r.a.createElement(C.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username",onPressEnter:this.handelSubmit}))),r.a.createElement(E.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(g.a.Password,{prefix:r.a.createElement(C.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),onPressEnter:this.handelSubmit,placeholder:"Password"}))),r.a.createElement(E.a.Item,null,r.a.createElement(b.a,{type:"primary",className:"login-form-button",onClick:this.handelSubmit},"Log in"),r.a.createElement("a",{href:"12"},"Forgot password")))))}}]),a}(n.Component),N=E.a.create({name:"AuthLogin"})(k),S=t(99),P=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).state={user:S.User.current().attributes},console.log(t.state.user),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(h.a,null,r.a.createElement(f.a,{span:24},r.a.createElement("h2",null,"Dashboard")),r.a.createElement(y.a,null)),r.a.createElement(h.a,null,r.a.createElement(f.a,{span:24},"Hi, ",this.state.user.name," !")))}}]),a}(n.Component),I=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(f.a,{span:24},r.a.createElement("h2",null,"Entry")),r.a.createElement(y.a,null))}}]),a}(n.Component),F=t(188),q=t(156),L=t(812),D=t(813),R=t(809),A=t(814),H=t(99),T=q.a.Option,M=L.a.confirm,V=function(e){function a(){var e,t;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(a)).call.apply(e,[this].concat(r)))).state={addUserVisible:!1,deleteUserVisible:!1,userForDelete:"",users:[],columns:[{title:"Name",dataIndex:"attributes.name",key:"name"},{title:"Email",dataIndex:"attributes.username",key:"email"},{title:"Role",dataIndex:"attributes.role",key:"role"}]},t.UNSAFE_componentWillMount=function(){t.getUsers()},t.deleteUser=function(e){return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.awrap(H.Cloud.run("deleteUser",{username:e}).then((function(e){t.getUsers()})).catch((function(e){console.log(e)})));case 2:case"end":return a.stop()}}))},t.handleUserSelect=function(e){var a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Object(F.a)(t),n.next=3,d.a.awrap(M({title:"Do you Want to delete these user?",content:e,onOk:function(){a.deleteUser(e),a.setState({deleteUserVisible:!1})},onCancel:function(){console.log("Cancel")}}));case 3:case"end":return n.stop()}}))},t.getUsers=function(){var e,a;return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=new H.Query("_User")).include("role"),n.prev=2,n.next=5,d.a.awrap(e.find());case 5:a=n.sent,t.setState({users:a}),t.setState({loading:!1}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(2),alert(n.t0.message),console.log(n.t0);case 14:case"end":return n.stop()}}),null,null,[[2,10]])},t.addUserShowModal=function(){t.setState({addUserVisible:!0})},t.addUserHandleOk=function(e){e.preventDefault(),t.props.form.validateFields((function(e,a){return d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return n.next=3,d.a.awrap(H.Cloud.run("addUser",{name:a.name,email:a.email,password:a.password,role:a.role}).then((function(){D.a.success("New user added"),t.props.form.resetFields(),t.getUsers(),t.setState({addUserVisible:!1})})).catch((function(e){console.log(e)})));case 3:case"end":return n.stop()}}))}))},t.addUserHandleCancel=function(){t.setState({addUserVisible:!1})},t.deleteUserShowModal=function(){t.setState({deleteUserVisible:!0})},t.deleteUserHandleOk=function(e){e.preventDefault(),t.getUsers(),t.setState({deleteUserVisible:!1})},t.deleteUserHandleCancel=function(){t.setState({deleteUserVisible:!1})},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(h.a,null,r.a.createElement(h.a,null,r.a.createElement(f.a,{span:18},r.a.createElement("h2",null,"User")),r.a.createElement(f.a,{span:6},r.a.createElement("div",{style:{float:"right"}},r.a.createElement(b.a,{style:{marginRight:10},type:"primary",shape:"circle",icon:"plus",onClick:this.addUserShowModal,ghost:!0}),r.a.createElement(b.a,{type:"danger",shape:"circle",icon:"delete",onClick:this.deleteUserShowModal,ghost:!0}))),r.a.createElement(y.a,null)),r.a.createElement(h.a,null,r.a.createElement(f.a,{span:24},this.state.users?r.a.createElement(R.a,{dataSource:this.state.users,columns:this.state.columns,rowKey:"id"}):r.a.createElement(A.a,null))),r.a.createElement(L.a,{title:"Add new user",visible:this.state.addUserVisible,onOk:this.addUserHandleOk,onCancel:this.addUserHandleCancel},r.a.createElement(E.a,{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:18}}},r.a.createElement(E.a.Item,{label:"Name"},e("name",{rules:[{required:!0,message:"Please input user name!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"E-mail"},e("email",{rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input user E-mail!"}]})(r.a.createElement(g.a,null))),r.a.createElement(E.a.Item,{label:"Role"},e("role",{rules:[{required:!0,message:"Please input user role!"}]})(r.a.createElement(q.a,{placeholder:"Select Role"},r.a.createElement(T,{value:"Report Generator"},"Report Generator"),r.a.createElement(T,{value:"Report Analyzer"},"Report Analyzer"),r.a.createElement(T,{value:"HOD"},"HOD")))),r.a.createElement(E.a.Item,{label:"Password"},e("password",{rules:[{required:!0,message:"Please input user password!"}]})(r.a.createElement(g.a.Password,null))))),r.a.createElement(L.a,{title:"Add new user",visible:this.state.deleteUserVisible,onOk:this.deleteUserHandleOk,onCancel:this.deleteUserHandleCancel},"Select user you want to delete",r.a.createElement(q.a,{placeholder:"Select User",onChange:this.handleUserSelect,style:{width:"100%"}},this.state.users.length>0&&this.state.users.map((function(e){return e.get("master")?"":r.a.createElement(T,{key:e.id,value:e.get("username")},e.get("name")," (",e.get("username"),")")})))))}}]),a}(n.Component),W=E.a.create({name:"addUser"})(V),B=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(h.a,null,r.a.createElement(f.a,{span:18},r.a.createElement("h2",null,"Customer")),r.a.createElement(f.a,{span:6},r.a.createElement("div",{style:{float:"right"}},r.a.createElement(b.a,{style:{marginRight:10},type:"primary",shape:"circle",icon:"plus",onClick:this.addUserShowModal,ghost:!0}),r.a.createElement(b.a,{type:"danger",shape:"circle",icon:"delete",onClick:this.deleteUserShowModal,ghost:!0}))),r.a.createElement(y.a,null)))}}]),a}(n.Component),_=t(196),G=t(96),z=t(256),J=t(99),K=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).state={currentUser:J.User.current().attributes},t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(z.a,{style:{width:"100%"},defaultSelectedKeys:["1"],mode:"inline",className:"side-menu"},r.a.createElement(z.a.Item,{key:"1",onClick:function(){e.props.history.push("/dashboard")}},r.a.createElement(C.a,{type:"home"})," Dashboard"),this.state.currentUser.master?r.a.createElement(z.a.Item,{key:"2",onClick:function(){e.props.history.push("/dashboard/entry")}},r.a.createElement(C.a,{type:"file-add"})," New report entry"):" ",this.state.currentUser.master?r.a.createElement(z.a.Item,{key:"3",onClick:function(){e.props.history.push("/dashboard/adduser")}},r.a.createElement(C.a,{type:"user"})," Users"):" ",this.state.currentUser.master?r.a.createElement(z.a.Item,{key:"4",onClick:function(){e.props.history.push("/dashboard/customer")}},r.a.createElement(C.a,{type:"team"})," Customer"):" ")}}]),a}(n.Component),Q=t(99),Y=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(i.a)(this,Object(u.a)(a).call(this,e))).getCompanyName=function(){var e;return d.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=new Q.Query("Company"),a.prev=1,a.next=4,d.a.awrap(e.find());case 4:a.sent.map((function(e){return t.setState({companyName:e.get("companyName")})})),document.title="Exactt | "+t.state.companyName,a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),console.log(a.t0);case 12:case"end":return a.stop()}}),null,null,[[1,9]])},t.UNSAFE_componentWillMount=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(Q.User.current());case 2:e.sent||t.props.history.push("/auth");case 4:case"end":return e.stop()}}))},t.handleLogout=function(){return d.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.awrap(Q.User.logOut().then((function(e){t.props.history.push("/auth")})).catch((function(e){console.log(e)})));case 2:case"end":return e.stop()}}))},t.state={user:Q.User.current(),companyName:"",currentUser:Q.User.current().attributes},t.getCompanyName(),t}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(h.a,{className:"height100"},r.a.createElement(h.a,{className:"header"},r.a.createElement(f.a,{span:8},r.a.createElement("img",{className:"headerLogo",src:v.a,alt:"exacttLogo"})),r.a.createElement(f.a,{span:8,type:"flex",justify:"space-around",align:"middle"},r.a.createElement("div",{className:"companyName"},this.state.companyName)),r.a.createElement(f.a,{span:8,type:"flex",justify:"end",align:"stretch"},r.a.createElement("div",{className:"actionButton"},r.a.createElement("span",{onClick:this.handleLogout,className:"items"},r.a.createElement(C.a,{type:"logout"})," Logout")))),r.a.createElement(h.a,{className:"container"},r.a.createElement(f.a,{span:4,style:{position:"fixed",height:"87%"}},r.a.createElement(G.a,{component:K})),r.a.createElement(f.a,{span:20,style:{marginLeft:"16.66666667%",padding:20,paddingTop:5}},r.a.createElement(G.a,{path:"/dashboard",exact:!0,component:P}),this.state.currentUser.master?r.a.createElement(G.a,{path:"/dashboard/entry",component:I}):"",this.state.currentUser.master?r.a.createElement(G.a,{path:"/dashboard/adduser",component:W}):"",this.state.currentUser.master?r.a.createElement(G.a,{path:"/dashboard/customer",component:B}):""))))}}]),a}(n.Component),$=function(e){function a(){return Object(c.a)(this,a),Object(i.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(m.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(_.a,null,r.a.createElement(G.a,{path:"/",exact:!0,component:O}),r.a.createElement(G.a,{path:"/auth",component:N}),r.a.createElement(G.a,{path:"/dashboard",component:Y}))}}]),a}(n.Component),X=(t(804),t(99));X.initialize("exactt-backend","xTmunj2MHFbmykNq","xTmunj2MHFbmykNq"),X.serverURL="http://192.168.43.128:1337/api";var Z=function(){return r.a.createElement($,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[369,1,2]]]);
//# sourceMappingURL=main.a682de03.chunk.js.map